<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="llm_title">LLM 原理可视化</title>
    <link rel="stylesheet" href="css/style.css">
    <script type="importmap">
        {
            "imports": {
                "three": "../libs/three/build/three.module.js",
                "three/addons/": "../libs/three/examples/jsm/"
            }
        }
    </script>
</head>
<body>
    <a href="../index.html" class="back-to-home" data-i18n="back_to_home">← 返回目录</a>
    <canvas id="scene-canvas" aria-label="LLM 神经网络可视化"></canvas>

    <div id="step-overlay" class="step-overlay">
        <div class="step-card">
            <h3 id="step-title" data-i18n="llm_step_ready">准备就绪</h3>
            <p id="step-desc" data-i18n="llm_step_ready_desc">请点击左侧"生成下一个 Token"开始演示。</p>
        </div>
    </div>

    <aside class="sidebar">
        <div class="sidebar-toggle"></div>
        <header>
            <div class="lang-switcher">
                <button class="lang-btn" onclick="window.i18n.setLanguage('zh')" data-lang="zh">中文</button>
                <button class="lang-btn" onclick="window.i18n.setLanguage('en')" data-lang="en">EN</button>
                <button class="lang-btn" onclick="window.i18n.setLanguage('de')" data-lang="de">DE</button>
            </div>
            <p class="eyebrow" data-i18n="llm_eyebrow">Computer Science & AI</p>
            <h1 data-i18n="llm_title">大语言模型 (LLM) 原理</h1>
            <p class="intro" data-i18n="llm_intro">
                想象你在玩成语接龙。LLM 也是如此：它阅读前面的内容，分析它们的关系，然后从"词库"中选出概率最高的一个词接在后面。
            </p>
        </header>

        <section class="controls">
            <div class="control-group">
                <label data-i18n="llm_ctrl_input">1. 选择一个开头</label>
                <div class="button-group vertical">
                    <button class="mode-btn active" data-prompt="sky" data-i18n="llm_prompt_sky">The sky is...</button>
                    <button class="mode-btn" data-prompt="code" data-i18n="llm_prompt_code">if (x > 0) { ...</button>
                    <button class="mode-btn" data-prompt="story" data-i18n="llm_prompt_story">Once upon a...</button>
                </div>
            </div>
            
            <button id="btn-generate" class="primary" data-i18n="llm_btn_generate">生成下一个 Token</button>
        </section>

        <section class="legend">
            <h2 data-i18n="llm_legend_title">图例说明</h2>
            <ul>
                <li><span class="chip token"></span> <strong data-i18n="llm_leg_token">Token</strong>: <span data-i18n="llm_leg_token_desc">模型处理的最小单位</span></li>
                <li><span class="chip attention"></span> <strong data-i18n="llm_leg_attn">Attention</strong>: <span data-i18n="llm_leg_attn_desc">回顾上文，寻找线索</span></li>
                <li><span class="chip prediction"></span> <strong data-i18n="llm_leg_pred">Prediction</strong>: <span data-i18n="llm_leg_pred_desc">预测候选词</span></li>
            </ul>
        </section>
    </aside>

    <div id="token-output" class="token-stream">
        <!-- Tokens will appear here -->
    </div>

    <script src="../assets/js/i18n.js?v=20241126_4"></script>
    <script type="module" src="js/main.js?v=improved"></script>
</body>
</html>
